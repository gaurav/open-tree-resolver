(function(e){function t(t){for(var r,s,i=t[0],l=t[1],c=t[2],d=0,u=[];d<i.length;d++)s=i[d],a[s]&&u.push(a[s][0]),a[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);f&&f(t);while(u.length)u.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/open-tree-resolver/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("64a9"),a=n.n(r);a.a},"0417":function(e,t,n){"use strict";var r=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ac6a"),n("7f7f");var a=r(n("b6d0"));n("c5f6");var o=n("2ef0"),s=n("da3d"),i=r(n("2b0e")),l=n("252c");i.default.component("ResizeObserver",l.ResizeObserver);var c={name:"Phylotree",props:{newick:{type:String,default:"()"},spacingX:{type:Number,default:20},phylogenyIndex:{type:String,default:(0,o.uniqueId)()},reasoningResults:{type:Object,default:function(){return{}}}},data:function(){return{pinningNodes:[],pinningNodeChildrenIRIs:new a.default}},computed:{phylogeny:function(){return{newick:this.newick}},baseURIForPhylogeny:function(){return"http://example.org/#phylogeny".concat(this.phylogenyIndex)},parsedNewick:function(){return(0,o.has)(window,"d3")&&(0,o.has)(d3,"layout")&&(0,o.has)(d3.layout,"newick_parser")?new s.PhylogenyWrapper({newick:this.newick}).getParsedNewickWithIRIs(this.baseURIForPhylogeny,d3.layout.newick_parser):new s.PhylogenyWrapper({newick:this.newick}).getParsedNewickWithIRIs(this.baseURIForPhylogeny)},newickErrors:function(){var e=s.PhylogenyWrapper.getErrorsInNewickString(this.newick);return e.filter(function(e){return"No phylogeny entered"!==e.title})},tree:function(){var e=this;if((0,o.has)(window,"d3")&&(0,o.has)(d3,"layout")&&(0,o.has)(d3.layout,"phylotree")){var t=d3.layout.phylotree().svg(d3.select("#phylogeny".concat(this.phylogenyIndex))).options({"internal-names":!0,transitions:!1,"left-right-spacing":"fit-to-size","top-bottom-spacing":"fixed-step"}).font_size(16).style_nodes(function(t,n){t.selectAll("text");if((0,o.has)(n,"name")&&""!==n.name&&n.children,(0,o.has)(n,"@id")&&e.pinningNodeChildrenIRIs.has(n["@id"])&&t.classed("descendant-of-pinning-node-node",!0),void 0!==n.name&&void 0===n.children){var r=s.TaxonomicUnitWrapper.getTaxonomicUnitsFromNodeLabel(n.name);0===r.length&&t.classed("terminal-node-without-tunits",!0)}}).style_edges(function(t,n){(0,o.has)(n,"source")&&(0,o.has)(n.source,"@id")&&e.pinningNodeChildrenIRIs.has(n.source["@id"])?t.classed("descendant-of-pinning-node-branch",!0):t.classed("descendant-of-pinning-node-branch",!1)});return t(this.parsedNewick),t}}},watch:{reasoningResults:function(){this.redrawTree()},newick:function(){this.redrawTree()}},mounted:function(){this.redrawTree()},methods:{recurseNodes:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;t(e,r,a);var s=r+1;return(0,o.has)(e,"children")&&e.children.forEach(function(e){s=n.recurseNodes(e,t,s,r)}),s},redrawTree:function(){this.pinningNodes=[],this.pinningNodeChildrenIRIs=new a.default;var e=this.tree;void 0!==e&&this.tree.size([0,$("#phylogeny".concat(this.phylogenyIndex)).width()+92]).spacing_x(this.spacingX).update()}}};t.default=c},"054c":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal",attrs:{id:"about-open-tree-resolver",tabindex:"-1",role:"dialog"}},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title"},[e._v("\n          About this tool\n        ")]),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("\n            Ã—\n          ")])])]),n("div",{staticClass:"modal-body col-md-12"},[n("p",[e._v("\n          The Phyloreference Open Tree Resolver was built as part of the\n          "),n("a",{attrs:{href:"https://www.phyloref.org"}},[e._v("\n            Phyloreferencing project\n          ")]),e._v(",\n          funded by the US National Science Foundation through collaborative\n          grants "),n("a",{attrs:{href:"http://www.nsf.gov/awardsearch/showAward?AWD_ID=1458484"}},[e._v("\n            DBI-1458484\n          ")]),e._v("\n          and "),n("a",{attrs:{href:"http://www.nsf.gov/awardsearch/showAward?AWD_ID=1458604"}},[e._v("\n            DBI-1458604\n          ")]),e._v(".\n          See "),n("a",{attrs:{href:"http://www.phyloref.org/about/#funding"}},[e._v("\n            Funding\n          ")]),e._v(" for details.\n        ")]),n("p",[e._v("The Curation Tool uses a number of open-source libraries, including:")]),n("ul",[n("li",[n("a",{attrs:{href:"https://cli.vuejs.org/"}},[e._v("\n              Vue CLI 3\n            ")])]),n("li",[n("a",{attrs:{href:"https://getbootstrap.com/"}},[e._v("\n              Bootstrap\n            ")])]),n("li",[n("a",{attrs:{href:"https://jquery.com/"}},[e._v("\n              jQuery\n            ")])]),n("li",[n("a",{attrs:{href:"https://github.com/veg/phylotree.js"}},[e._v("\n              phylotree.js\n            ")]),e._v(",\n            published as "),n("a",{attrs:{href:"https://doi.org/10.1186/s12859-018-2283-2"}},[e._v("\n              Shank "),n("em",[e._v("et al")]),e._v(", 2018\n            ")])]),n("li",[n("a",{attrs:{href:"https://d3js.org/"}},[e._v("\n              D3.js\n            ")])]),n("li",[n("a",{attrs:{href:"https://momentjs.com/"}},[e._v("\n              Moment.js\n            ")])]),n("li",[n("a",{attrs:{href:"https://github.com/eligrey/FileSaver.js"}},[e._v("\n              FileSaver.js\n            ")])])])]),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[e._v("\n          Close\n        ")])])])])])}];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},"0fed":function(e,t,n){},"199c":function(e,t,n){"use strict";var r=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("cadf"),n("551c"),n("f751"),n("097d");var a=r(n("f7af")),o=r(n("9b34")),s=r(n("f845")),i={name:"App",components:{TopNavigationBar:a.default,PhylorefTable:o.default,AboutOpenTreeResolverModal:s.default},data:function(){return{OPEN_TREE_RESOLVER_VERSION:"0.1.0"}}};t.default=i},"1d07":function(e,t,n){"use strict";n.r(t);var r=n("6b40"),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t["default"]=a.a},"23be":function(e,t,n){"use strict";n.r(t);var r=n("199c"),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t["default"]=a.a},2773:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.newickErrors.length>0?[e._l(e.newickErrors,function(t,r){return[n("p",[n("strong",[e._v(e._s(t.title)+".")]),e._v(" "+e._s(t.message))])]})]:[n("svg",{staticClass:"col-md-12 phylogeny",attrs:{id:"phylogeny"+e.phylogenyIndex}}),n("ResizeObserver",{on:{notify:function(t){return e.redrawTree()}}})]],2)},a=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},"2c1c":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("nav",{staticClass:"navbar navbar-expand navbar-dark bg-dark mb-2 fixed-top"},[n("a",{staticClass:"navbar-brand",attrs:{href:"index.html"}},[e._v("\n      Open Tree Resolver v"+e._s(e.version)+"\n    ")]),e._m(0)])])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collapse navbar-collapse"},[n("ul",{staticClass:"navbar-nav"},[n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"#",onclick:"$('#about-open-tree-resolver').modal()"}},[e._v("\n            About this tool\n          ")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"https://www.phyloref.org/"}},[e._v("\n            Phyloreferencing website\n          ")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"https://github.com/phyloref/open-tree-resolver"}},[e._v("\n            Github repository\n          ")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"https://github.com/phyloref/open-tree-resolver/issues"}},[e._v("\n            Report bug\n          ")])])])])}];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},"32ae":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={name:"TopNavigationBar",props:{version:{type:String,default:"UNKNOWN"}}};t.default=r},"3dfd":function(e,t,n){"use strict";n.r(t);var r=n("538b"),a=n("23be");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);n("034f");var s=n("2877"),i=Object(s["a"])(a["default"],r["a"],r["b"],!1,null,null,null);t["default"]=i.exports},4360:function(e,t,n){"use strict";var r=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("2b0e")),o=r(n("2f62"));a.default.use(o.default);var s=!1,i=new o.default.Store({state:{},modules:{},strict:s});t.default=i},4678:function(e,t,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="4678"},"538b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("TopNavigationBar",{attrs:{version:e.OPEN_TREE_RESOLVER_VERSION}}),n("div",{attrs:{id:"wrapper"}},[n("PhylorefTable")],1),n("AboutOpenTreeResolverModal")],1)},a=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},"56d7":function(e,t,n){"use strict";var r=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("cadf"),n("551c"),n("f751"),n("097d");var a=r(n("2b0e"));n("4989");var o=r(n("9f7b"));n("ab8b"),n("177c");var s=r(n("252c"));n("6eb0");var i=r(n("3dfd")),l=r(n("4360"));window.$=n("1157"),a.default.use(o.default),a.default.use(s.default),a.default.config.productionTip=!1;var c=new a.default({el:"#app",store:l.default,render:function(e){return e(i.default)}});t.default=c},"5c92":function(e,t,n){"use strict";n.r(t);var r=n("32ae"),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t["default"]=a.a},"5ea0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={name:"AboutOpenTreeResolverModal"};t.default=r},"64a9":function(e,t,n){},"6b40":function(e,t,n){"use strict";var r=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("6762"),n("2fdb"),n("7514"),n("4917"),n("f559"),n("55dd"),n("3846"),n("7f7f"),n("a481");var a=r(n("f499")),o=r(n("a745"));n("ac6a");var s=n("2ef0"),i=r(n("2b0e")),l=r(n("1157")),c=n("da3d"),f=r(n("c0e6")),d={name:"PhylorefTable",components:{Phylotree:f.default},data:function(){return{flagDisplayExpression:!1,loadedPhylorefs:[],openTreeTaxonomyInfoByName:{},newick:"()",PHYX_CONTEXT_JSON:"http://www.phyloref.org/phyx.js/context/v0.1.0/phyx.json",ONTOLOGY_BASEURI:"http://example.org/#",reasoningInProgress:!1,reasoningResults:{},currentNodes:{}}},computed:{allSpecifiers:function(){var e=this;return this.loadedPhylorefs.map(function(t){return e.getSpecifiersForPhyloref(t)}).reduce(function(e,t){return e.concat(t)},[])},phylorefsWithMoreThanOneSpecifier:function(){var e=this;return this.loadedPhylorefs.filter(function(t){return(e.getSpecifiersForPhyloref(t)||[]).length>1})},ottIdsForAllSpecifiers:function(){var e=this,t=this.allSpecifiers.map(function(t){return e.getOpenTreeTaxonomyID(t)}).filter(function(e){return void 0!==e&&null!==e});return t},asOntology:function(){var e=this,t=this.loadedPhylorefs.filter(function(e){return(0,s.has)(e,"equivalentClass")}),n=new c.PhylogenyWrapper({newick:this.newick}).getNodesAsJSONLD(this.ONTOLOGY_BASEURI+"phylogeny"),r={};t.forEach(function(e){(0,s.has)(e,"label")&&((0,s.has)(e,"@id"),r[e.label]=e)}),this.currentNodes={},n.forEach(function(t){var n=t;n["@context"]=e.PHYX_CONTEXT_JSON,(0,s.has)(n,"@type")||(n["@type"]=[]),(0,o.default)(n["@type"])||(n["@type"]=[n["@type"]]),(0,s.has)(n,"parent")&&(n["obo:CDAO_0000179"]={"@id":n.parent});var a=n.labels||[];(0,s.has)(n,"expectedPhyloreferenceNamed")&&(a=a.concat(n.expectedPhyloreferenceNamed)),a.forEach(function(e){if((0,s.has)(r,e)){var t=r[e]["@id"];n["@type"].push({"@type":"owl:Restriction",onProperty:"obo:OBI_0000312",someValuesFrom:{"@type":"owl:Class",intersectionOf:[{"@id":"obo:OBI_0302910"},{"@type":"owl:Restriction",onProperty:"obo:OBI_0000293",someValuesFrom:{"@id":t}}]}})}}),(0,s.has)(n,"representsTaxonomicUnits")&&n.representsTaxonomicUnits.forEach(function(t){e.convertTUtoRestriction(t).forEach(function(e){n["@type"].push({"@type":"owl:Restriction",onProperty:"obo:CDAO_0000187",someValuesFrom:e})})}),n["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]=n["@type"].map(function(e){return(0,s.isString)(e)?{"@id":e}:e}),delete n["@type"],e.currentNodes[n["@id"]]=n});var i=[{"@context":this.PHYX_CONTEXT_JSON,"@id":this.ONTOLOGY_BASEURI,"@type":"owl:Ontology","owl:imports":["http://raw.githubusercontent.com/phyloref/curation-workflow/develop/ontologies/phyloref_testcase.owl","http://ontology.phyloref.org/2018-12-14/phyloref.owl","http://ontology.phyloref.org/2018-12-14/tcan.owl"]}];return(0,a.default)(i.concat(t).concat(n),null,4)},exampleJSONLDURLs:function(){return[{url:"examples/fisher_et_al_2007.jsonld",title:"Fisher et al, 2007"},{url:"examples/hillis_and_wilcox_2005.jsonld",title:"Hillis and Wilcox, 2005"},{url:"examples/brochu_2003.jsonld",title:"Brochu 2003"}]}},methods:{convertTUtoRestriction:function(e){if((0,s.has)(e,"referencesTaxonomicUnits"))return this.convertTUtoRestriction(e.referencesTaxonomicUnits[0]||{});var t=[];return(0,s.has)(e,"scientificNames")?e.scientificNames.forEach(function(e){var n=new c.ScientificNameWrapper(e);t.push({"@type":"owl:Restriction",onProperty:"http://rs.tdwg.org/ontology/voc/TaxonConcept#hasName",someValuesFrom:{"@type":"owl:Class",intersectionOf:[{"@id":"obo:NOMEN_0000107"},{"@type":"owl:Restriction",onProperty:"dwc:scientificName",hasValue:n.binomialName}]}})}):(0,s.has)(e,"includesSpecimens")?e.includesSpecimens.forEach(function(e){var n=new SpecimenWrapper(e);t.push({"@type":"owl:Restriction",onProperty:"dwc:organismID",hasValue:n.occurrenceID})}):(console.log("WARNING: taxonomic unit could not be converted into restriction: ".concat((0,a.default)(e),"\n")),t.push({})),t},reasonOverPhylogeny:function(){var e=this;this.reasoningInProgress||(this.reasoningInProgress=!0,this.reasoningResults={},l.default.post("http://localhost:34214/reason",{jsonld:this.asOntology}).done(function(t){e.reasoningResults=t.phylorefs}).fail(function(e,t,n){var r=n;(0,s.has)(e,"responseJSON")&&(0,s.has)(e.responseJSON,"error")&&(r=e.responseJSON.error),void 0!==r&&""!==r||(r="unknown error"),alert("Error occurred on server while reasoning: ".concat(r))}).always(function(){e.reasoningInProgress=!1}))},getOTTNodeId:function(e){var t=e.labels||[];if(0!=t.length){var n=t[0],r=/^(.*)[_\s](.*?ott.*)$/.exec(n);if(null==r){var a=/^mrca.*$/.exec(n);if(null==a)return;return["",n]}return[r[1],r[2]]}},downloadInducedSubtreeFromOpenTreeOfLife:function(e){var t=this;0!==e.length&&l.default.ajax({type:"POST",url:"https://ot39.opentreeoflife.org/v3/tree_of_life/induced_subtree",data:(0,a.default)({ott_ids:e}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t.newick=e.newick}}).fail(function(n){if("[/v3/tree_of_life/induced_subtree] Error: Nodes not found!"===n.responseJSON.message){var r=n.responseJSON.unknown;console.log("The Open Tree synthetic tree does not contain the following nodes: ",r);var o=e.filter(function(e){return!(0,s.has)(r,"ott"+e)});console.log("Query has been reduced to the following nodes: ",o),l.default.ajax({type:"POST",url:"https://ot39.opentreeoflife.org/v3/tree_of_life/induced_subtree",data:(0,a.default)({ott_ids:o}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t.newick=e.newick}}).fail(function(e){return console.log("Error accessing Open Tree induced_subtree",e)})}else console.log("Error accessing Open Tree induced_subtree",n)})},getPhylorefDescription:function(e){var t=e.cladeDefinition||e["obo:IAO_0000115"]||"None";return t.replace(/\n+/g,"<br />")},getOpenTreeTaxonomyID:function(e){var t=this.openTreeTaxonomyInfoByName[this.getScinameForSpecifier(e)];if(t&&t.length>0)return t[0]["taxon"]["ott_id"]},queryOpenTreeTaxonomyIDs:function(){var e=this,t=this.allSpecifiers.map(function(t){return e.getScinameForSpecifier(t)});this.queryOpenTreeTaxonomyIDsForNames({names:t})},setOpenTreeTaxonomyInfoByNames:function(e){var t=this;e.forEach(function(e){if((0,s.has)(e,"name")&&e.name&&(0,s.has)(e,"matches")&&e.matches&&e.matches.length>0){var n=e.name.trim();e.matches[0].taxon.flags;i.default.set(t.openTreeTaxonomyInfoByName,n,e["matches"]||[])}})},queryOpenTreeTaxonomyIDsForNames:function(e){var t=this,n=(0,s.uniq)(e.names).filter(function(e){return void 0!==e&&null!==e}).sort();this.setOpenTreeTaxonomyInfoByNames(n.map(function(e){return{name:e,matches:[]}})),(0,s.chunk)(n,999).forEach(function(n){e.names=n;var r=(0,a.default)(e);l.default.ajax({type:"POST",url:"https://api.opentreeoflife.org/v3/tnrs/match_names",data:r,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t.setOpenTreeTaxonomyInfoByNames(e.results)}}).fail(function(e){return console.log("Error accessing Open Tree Taxonomy",e)})})},getSpecifierType:function(e,t){return-1!==(e.internalSpecifiers||[]).indexOf(t)?"includes":-1!==(e.externalSpecifiers||[]).indexOf(t)?"excludes":"unknown"},getSpecifiersForPhyloref:function(e){var t=e.internalSpecifiers||[];return t.concat(e.externalSpecifiers||[])},getLabelForSpecifier:function(e){return c.PhylorefWrapper.getSpecifierLabel(e)},getLabelForSpecifierAsHTML:function(e){var t=c.PhylorefWrapper.getSpecifierLabel(e);return t.startsWith("Specimen")?t:t.replace(/^\w+ [a-z\-]+/,"<em>$&</em>")},getScinameForSpecifier:function(e){var t=c.PhylorefWrapper.getSpecifierLabel(e);if(!t.startsWith("Specimen")){var n=t.match(/^\w+ [a-z\-]+/);return n?n[0]:void 0}},loadJSONLDFromURL:function(e){var t=this;l.default.getJSON(e).done(function(e){t.extractPhyloreferencesFromJSONLD(e)}).fail(function(t){200===t.status?alert("Could not load JSON-LD file '".concat(e,"': file malformed, see console for details.")):alert("Could not load JSON-LD file '".concat(e,"': server error ").concat(t.status," ").concat(t.statusText," from ").concat((0,a.default)(t)))})},loadJSONLDFromFileInputById:function(e){var t=this;if("function"===typeof window.FileReader){var n=(0,l.default)(e);if(n)if(n.prop("files")){var r=n.prop("files");if(0!==r.length)for(var a=0;a<r.length;a++){var o=r.item(a),s=new FileReader;s.onload=function(e){var n=e.target.result,r=JSON.parse(n);t.extractPhyloreferencesFromJSONLD(r)},s.readAsText(o)}else alert("Please select a file before attempting to load it.")}else alert("File input element found, but files property missing: try another browser?");else alert("Programmer error: No file input element specified.")}else alert("The FileReader API is not supported on this browser.")},addPhyloref:function(e){void 0===this.loadedPhylorefs.find(function(t){return(0,s.isEqual)(t,e)})&&this.loadedPhylorefs.push(e)},extractPhyloreferencesFromJSONLD:function(e){var t=this;(0,o.default)(e)&&e.forEach(function(e){return t.extractPhyloreferencesFromJSONLD(e)}),(0,s.has)(e,"phylorefs")&&(0,o.default)(e.phylorefs)&&e.phylorefs.forEach(function(e){return t.addPhyloref(e)}),(0,s.has)(e,"subClassOf")&&((0,o.default)(e.subClassOf)&&e.subClassOf.includes("phyloref:Phyloreference")&&this.addPhyloref(e),"phyloref:Phyloreference"===e.subClassOf&&this.addPhyloref(e))}}};t.default=d},"809d":function(e,t,n){"use strict";n.r(t);var r=n("5ea0"),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t["default"]=a.a},"810f":function(e,t,n){"use strict";n.r(t);var r=n("0417"),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t["default"]=a.a},"8a2a":function(e,t,n){"use strict";var r=n("0fed"),a=n.n(r);a.a},"9b34":function(e,t,n){"use strict";n.r(t);var r=n("b35f"),a=n("1d07");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);var s=n("2877"),i=Object(s["a"])(a["default"],r["a"],r["b"],!1,null,null,null);t["default"]=i.exports},b35f:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"card border-dark"},[n("h5",{staticClass:"card-header border-dark"},[e._v("\n      Phyloreferences\n    ")]),n("div",{staticClass:"card-body p-0"},[n("table",{staticClass:"table table-hover table-flush"},[e._m(0),n("tbody",[0===e.loadedPhylorefs.length?n("tr",{staticClass:"bg-white"},[n("td",{attrs:{colspan:"5"}},[n("center",[n("em",[e._v("No phyloreferences loaded")])])],1)]):e._e(),e._l(e.loadedPhylorefs,function(t,r){return[n("tr",{key:r},[n("td",{attrs:{rowspan:e.getSpecifiersForPhyloref(t).length+1}},[e._v("\n                "+e._s(t.label||"Phyloref "+(r+1))+"\n              ")]),n("td",{attrs:{rowspan:e.getSpecifiersForPhyloref(t).length+1}},[n("span",{domProps:{innerHTML:e._s(e.getPhylorefDescription(t))}})]),n("td",{attrs:{rowspan:e.getSpecifiersForPhyloref(t).length+1}},[e._v("\n                Â \n                "),e._l(e.reasoningResults[t["@id"]],function(t,r){return[n("a",{attrs:{target:"_blank",href:"https://tree.opentreeoflife.org/opentree/@"+e.getOTTNodeId(e.currentNodes[t])[1]}},[e._v(e._s(e.getOTTNodeId(e.currentNodes[t])[1]))]),n("br")]})],2)]),e._l(e.getSpecifiersForPhyloref(t),function(a){return[n("tr",{key:"phyloref"+r+", specifier: "+e.getLabelForSpecifier(a)},[n("td",[e._v(e._s(e.getSpecifierType(t,a))+" "),n("span",{domProps:{innerHTML:e._s(e.getLabelForSpecifierAsHTML(a))}})]),n("td",[e.getOpenTreeTaxonomyID(a)?[n("a",{attrs:{target:"_blank",href:"https://tree.opentreeoflife.org/opentree/@ott"+e.getOpenTreeTaxonomyID(a)}},[e._v(e._s(e.getOpenTreeTaxonomyID(a)))]),e._v("\n                    ("),n("a",{attrs:{target:"_blank",href:"https://tree.opentreeoflife.org/taxonomy/browse?id="+e.getOpenTreeTaxonomyID(a)}},[e._v("ott")]),e._v(")\n                  ")]:e._e()],2)])]})]})],2)])]),n("div",{staticClass:"card-footer"},[n("div",{staticClass:"btn-group",attrs:{role:"group","area-label":"Add phyloreferences"}},[n("button",{staticClass:"btn btn-primary",attrs:{href:"javascript: void(0)",onclick:"$('#load-jsonld').trigger('click')"}},[e._v("\n          Add from JSON-LD file\n        ")]),n("input",{staticClass:"d-none",attrs:{id:"load-jsonld",type:"file",multiple:"true"},on:{change:function(t){return e.loadJSONLDFromFileInputById("#load-jsonld")}}}),n("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"addFromExamples","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v("\n          Add from example file\n        ")]),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"addFromExamples"}},e._l(e.exampleJSONLDURLs,function(t){return n("a",{key:t.url,staticClass:"dropdown-item",attrs:{href:"javascript:;"},on:{click:function(n){return e.loadJSONLDFromURL(t.url)}}},[e._v("\n            "+e._s(t.title)+"\n          ")])}),0)]),n("div",{staticClass:"btn-group ml-2",attrs:{role:"group","area-label":"Edit phyloreference list"}},[n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.loadedPhylorefs=[]}}},[e._v("\n          Clear phyloreferences\n        ")])]),n("div",{staticClass:"btn-group ml-2",attrs:{role:"group","area-label":"Open Tree Taxonomy tasks"}},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.queryOpenTreeTaxonomyIDs()}}},[e._v("\n          Look up Open Tree of Life Taxonomy IDs\n        ")])])])]),n("div",{staticClass:"card border-dark mt-2"},[n("h5",{staticClass:"card-header border-dark"},[e._v("\n      Phylogeny as Newick\n    ")]),n("div",{staticClass:"card-body"},[n("form",[n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-md-2 control-label",attrs:{for:"newick"}},[e._v("\n            Newick\n          ")]),n("div",{staticClass:"col-md-10 input-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:e.newick,expression:"newick",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{rows:"3",placeholder:"Enter Newick string for phylogeny here"},domProps:{value:e.newick},on:{change:function(t){e.newick=t.target.value}}})])])])]),n("div",{staticClass:"card-footer"},[n("div",{staticClass:"btn-group",attrs:{role:"group","area-label":"Look up trees on the Open Tree of Life"}},[n("button",{staticClass:"btn btn-primary",attrs:{href:"javascript: void(0)"},on:{click:function(t){return e.downloadInducedSubtreeFromOpenTreeOfLife(e.ottIdsForAllSpecifiers)}}},[e._v("\n          Download induced subtree from the Open Tree of Life\n        ")])])])]),n("div",{staticClass:"card border-dark mt-2"},[n("h5",{staticClass:"card-header"},[e._v("\n      Phylogeny visualization\n    ")]),n("div",{staticClass:"card-body"},[n("Phylotree",{attrs:{newick:e.newick}})],1),n("div",{staticClass:"card-footer"},[n("div",{staticClass:"btn-group",attrs:{role:"group","area-label":"Reason over this phylogeny"}},[n("button",{staticClass:"btn btn-primary",attrs:{href:"javascript: void(0)"},on:{click:function(t){return e.reasonOverPhylogeny()}}},[e._v("\n          Reason over this phylogeny"),e.reasoningInProgress?n("span",[e._v(" (in progress)")]):e._e()])])])])])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("th",{attrs:{width:"15%"}},[e._v("Name")]),n("th",{attrs:{width:"25%"}},[e._v("Description")]),n("th",[e._v("Resolved Open Tree node")]),n("th",{attrs:{width:"30%"}},[e._v("Specifiers")]),n("th",[e._v("Open Tree Taxonomy ID")])])}];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},c0e6:function(e,t,n){"use strict";n.r(t);var r=n("2773"),a=n("810f");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);n("8a2a");var s=n("2877"),i=Object(s["a"])(a["default"],r["a"],r["b"],!1,null,null,null);t["default"]=i.exports},f7af:function(e,t,n){"use strict";n.r(t);var r=n("2c1c"),a=n("5c92");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);var s=n("2877"),i=Object(s["a"])(a["default"],r["a"],r["b"],!1,null,null,null);t["default"]=i.exports},f845:function(e,t,n){"use strict";n.r(t);var r=n("054c"),a=n("809d");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);var s=n("2877"),i=Object(s["a"])(a["default"],r["a"],r["b"],!1,null,null,null);t["default"]=i.exports}});
//# sourceMappingURL=app.2b1c6f00.js.map